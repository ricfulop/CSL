{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/csl_v1_2_schema_draft.json",
  "title": "CSL v1.2 (Draft)",
  "type": "object",
  "properties": {
    "csl": { "type": "string", "enum": ["1.2", "1.1"] },
    "meta": { "type": "object" },
    "sketches": { "type": "array", "items": {"type":"object"} },
    "features": { "type": "array", "items": {"type":"object"} },
    "export": { "type": "array", "items": {"type":"object"} },
    "thumbnail": { "type": "array", "items": {"type":"object"} }
  },
  "additionalProperties": true,
  "allOf": [
    {
      "if": { "properties": { "features": {"contains": {"properties": {"kind": {"const": "loft"}}}}}},
      "then": {
        "properties": {
          "features": {
            "items": {
              "properties": {
                "kind": {},
                "sections": {"type": "array"},
                "guides": {"type": "array"},
                "rail": {},
                "centerline": {},
                "continuity": {"type": "string", "enum": ["G0","G1","G2"]},
                "sections_continuity": {"type": "array", "items": {"type": "string", "enum": ["G0","G1","G2"]}}
              }
            }
          }
        }
      }
    },
    {
      "if": { "properties": { "features": {"contains": {"properties": {"kind": {"const": "fillet"}}}}}},
      "then": { "properties": { "features": {"items": {"properties": { "tangent_chain": {"type":"boolean"}}}}}}
    },
    {
      "if": { "properties": { "features": {"contains": {"properties": {"kind": {"const": "chamfer"}}}}}},
      "then": { "properties": { "features": {"items": {"properties": { "angle": {}, "d2": {}, "distance2": {} }}}}}
    },
    {
      "properties": {
        "sketches": {"items": {"properties": {"constraints": {"type": "array", "items": {"type":"object","properties":{ "kind":{}, "type":{}, "items": {"type":"array"}}}}}}}
      }
    },
    {
      "if": { "properties": { "features": {"contains": {"properties": {"kind": {"const": "pattern"}}}}}},
      "then": { "properties": { "features": {"items": {"properties": { "table": {"type":"array"}}}}}}
    }
  ]
}