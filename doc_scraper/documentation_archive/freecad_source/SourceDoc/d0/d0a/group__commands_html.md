---
url: https://freecad.github.io/SourceDoc/d0/d0a/group__commands.html
scraped_at: 2025-09-08T14:51:27.681495
title: Untitled
---

  * [ ![](https://www.freecad.org/svg/logo-freecad.svg) ](https://freecadweb.org "FreeCAD")
  * [Index](../../index.html "Index")
  * [Modules](../../modules.html "Modules list")
  * [Classes](../../annotated.html "Annotated list")

Command Framework

[Core](../../d4/d68/group__CORE.html) » [Gui](../../df/dd1/group__GUI.html)

Structure for registering commands to the FreeCAD system.

Structure for registering commands to the FreeCAD system.

#  Overview

In GUI applications many commands can be invoked via a menu item, a toolbar
button or an accelerator key. The answer of Qt to master this challenge is the
class _QAction_. A QAction object can be added to a popup menu or a toolbar
and keep the state of the menu item and the toolbar button synchronized.

For example, if the user clicks the menu item of a toggle action then the
toolbar button gets also pressed and vice versa. For more details refer to
your Qt documentation.

#  Drawbacks

Since QAction inherits [QObject](../../d9/d5b/classQObject.html) and emits the
_triggered()_ signal or _toggled()_ signal for toggle actions it is very
convenient to connect these signals e.g. with slots of your MainWindow class.
But this means that for every action an appropriate slot of MainWindow is
necessary and leads to an inflated MainWindow class. Furthermore, it's simply
impossible to provide plugins that may also need special slots – without
changing the MainWindow class.

#  Way out

To solve these problems we have introduced the command framework to decouple
QAction and MainWindow. The base classes of the framework are
_[Gui::CommandBase](../../d9/daa/classGui_1_1CommandBase.html "The CommandBase
class This lightweight class is the base class of all commands in FreeCAD.")_
and _[Gui::Action](../../de/d94/classGui_1_1Action.html "The Action class is
the link between Qt's QAction class and FreeCAD's command classes
\(Command\).")_ that represent the link between Qt's QAction world and the
FreeCAD's command world.

The Action class holds a pointer to QAction and CommandBase and acts as a
mediator and – to save memory – that gets created
([Gui::CommandBase::createAction()](../../d9/daa/classGui_1_1CommandBase.html#a9e447bea6f531fcf8ddc4b18287437cf))
not before it is added
([Gui::Command::addTo()](../../d2/dff/classGui_1_1Command.html#ae07ba9ae956a04300bb93591d26794b6))
to a menu or toolbar.

Now, the implementation of the slots of MainWindow can be done in the method
_activated()_ of subclasses of Command instead.

For example, the implementation of the "Open file" command can be done as
follows.

class OpenCommand : public Command

{

public:

OpenCommand() : Command("Std_Open")

{

// set up menu text, status tip, ...

sMenuText = "&Open";

sToolTipText = "Open a file";

sWhatsThis = "Open a file";

sStatusTip = "Open a file";

sPixmap = "Open"; // name of a registered pixmap

sAccel = "Shift+P"; // or "P" or "P, L" or "Ctrl+X, Ctrl+C" for a sequence

}

protected:

void activated(int)

{

QString filter ... // make a filter of all supported file formats

QStringList FileList = QFileDialog::getOpenFileNames( filter,QString(),
getMainWindow() );

for ( QStringList::Iterator it = FileList.begin(); it != FileList.end(); ++it
) {

getGuiApplication()->open((*it).latin1());

}

}

};

An instance of _OpenCommand_ must be created and added to the
[Gui::CommandManager](../../d1/da7/classGui_1_1CommandManager.html) to make
the class known to FreeCAD. To see how menus and toolbars can be built go to
the [Workbench Framework](../../d7/dc3/group__workbench.html).

See also

    [Gui::Command](../../d2/dff/classGui_1_1Command.html "The Command class."), [Gui::CommandManager](../../d1/da7/classGui_1_1CommandManager.html "The CommandManager class This class manage all available commands in FreeCAD.")

* * *

Generated by
[![doxygen](../../doxygen.svg)](https://www.doxygen.org/index.html) 1.9.4

